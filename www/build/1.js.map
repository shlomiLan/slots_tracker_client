{"version":3,"sources":["../../src/pages/modal/expense/expense-modal.module.ts","../../src/pages/modal/expense/expense-modal.ts"],"names":[],"mappings":"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","file":"1.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { ExpenseModalPage } from './expense-modal';\n\n@NgModule({\n  declarations: [\n    ExpenseModalPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(ExpenseModalPage),\n  ],\n})\nexport class ModalPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/modal/expense/expense-modal.module.ts","import {Component} from '@angular/core';\nimport {FormArray, FormBuilder, FormGroup} from '@angular/forms';\nimport {IonicPage, NavParams, ViewController} from 'ionic-angular';\nimport {ApiServiceProvider} from \"../../../providers/api-service/api-service\";\n\nenum State {Unset = 1, Success = 2, Error = 4}\n\n@IonicPage()\n@Component({\n  template: `\n    <ion-header>\n      <ion-navbar>\n        <ion-title>Modal</ion-title>\n        <ion-buttons end>\n          <button ion-button (click)=\"closeModal()\">Close</button>\n        </ion-buttons>\n      </ion-navbar>\n    </ion-header>\n\n    <ion-content padding>\n      <form [formGroup]=\"expense\" (ngSubmit)=\"saveData()\" *ngIf=\"categories_form && methods_form\">\n        <ion-item>\n          <ion-label>Amount:</ion-label>\n          <ion-input formControlName=\"amount\" type=\"number\"></ion-input>\n        </ion-item>\n        <ion-item>\n          <ion-label>Description:</ion-label>\n          <ion-input formControlName=\"description\" type=\"text\"></ion-input>\n        </ion-item>\n        <ion-item>\n          <ion-label>Category:</ion-label>\n          <ion-select formControlName=\"category\" (ionChange)=\"categoryChange($event);\" interface=\"popover\">\n            <ion-option *ngFor=\"let item of categories_form.controls\" [value]=\"item.value._id\">\n              {{item.value.name}}\n            </ion-option>\n          </ion-select>\n        </ion-item>\n        <ion-item>\n          <ion-label>Pay method:</ion-label>\n          <ion-select formControlName=\"pay_method\" (ionChange)=\"payMethodChange($event);\" interface=\"popover\">\n            <ion-option *ngFor=\"let item of methods_form.controls\" [value]=\"item.value._id\">\n              {{item.value.name}}\n            </ion-option>\n          </ion-select>\n        </ion-item>\n        <ion-item>\n          <ion-label>Date:</ion-label>\n          <ion-datetime displayFormat=\"D MMM YYYY\" formControlName=\"timestamp\"></ion-datetime>\n        </ion-item>\n        <ion-item>\n          <ion-label>One time</ion-label>\n          <ion-checkbox color=\"dark\" formControlName=\"one_time\"></ion-checkbox>\n        </ion-item>\n\n        <button ion-button type=\"submit\" [disabled]=\"!expense.valid\">Submit</button>\n    </form>\n    </ion-content>\n  `\n})\n\nexport class ExpenseModalPage {\n  private expense: FormGroup;\n  private methods_form: FormArray;\n  private categories_form: FormArray;\n\n  private methods: any;\n  private categories: any;\n  private data_loading_indicator: { methods: State, categories: State };\n  private error_msg: string;\n\n  constructor(private navParams: NavParams, private formBuilder: FormBuilder, private viewCtrl: ViewController,\n              private api: ApiServiceProvider) {\n\n    // Initialize data\n    this.error_msg = '';\n    this.data_loading_indicator = {methods: State.Unset, categories: State.Unset};\n    this.getPayMethods();\n    this.getCategories();\n\n    this.expense = this.formBuilder.group(this.navParams.get('data'));\n\n    // Modify the pay_method and category data for the select element\n    this.expense.controls['pay_method'].setValue(this.expense.value.pay_method._id);\n    this.expense.controls['category'].setValue(this.expense.value.category._id);\n    //   }\n    // }\n  }\n\n  saveData() {\n    this.expense.controls['pay_method'].setValue({\"_id\": this.expense.value.pay_method});\n    this.expense.controls['category'].setValue({\"_id\": this.expense.value.category});\n    this.viewCtrl.dismiss(this.expense.value);\n  }\n\n  closeModal() {\n    this.viewCtrl.dismiss();\n  }\n\n  payMethodChange(value) {\n    this.expense.controls['pay_method'].setValue(value);\n  }\n\n  categoryChange(value) {\n    this.expense.controls['category'].setValue(value);\n  }\n\n  getPayMethods() {\n    this.api.getPayMethods().subscribe(response => {\n      this.methods = response;\n      this.methods_form = this.formBuilder.array(this.methods);\n      this.data_loading_indicator.methods = State.Success;\n      console.log(this.data_loading_indicator.methods);\n    }, err => {\n      this.data_loading_indicator.methods = State.Error;\n      this.error_msg = this.error_msg.concat('In getPayMethods: ', err.error);\n      this.close_and_display_error();\n    });\n  }\n\n  getCategories() {\n    this.api.getCategories().subscribe(response => {\n      this.categories = response;\n      this.categories_form = this.formBuilder.array(this.categories);\n      this.data_loading_indicator.categories = State.Success;\n    }, err => {\n      this.data_loading_indicator.categories = State.Error;\n      this.error_msg = this.error_msg.concat('In getCategories: ', err.error);\n      this.close_and_display_error();\n    });\n  }\n\n  close_and_display_error() {\n    console.log(this.data_loading_indicator.methods);\n    console.log(this.data_loading_indicator.categories);\n\n    this.viewCtrl.dismiss({err: this.error_msg});\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/modal/expense/expense-modal.ts"],"sourceRoot":""}